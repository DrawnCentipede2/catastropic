@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here.
All colors MUST be HSL. */

@layer base {
  :root {
    /* Anthropic-inspired, warm neutral paper + terracotta accent */
    --background: 38 40% 96%; /* paper */
    --foreground: 24 15% 12%; /* ink */

    --card: 0 0% 100%;
    --card-foreground: 24 15% 12%;

    --popover: 0 0% 100%;
    --popover-foreground: 24 15% 12%;

    --primary: 17 77% 54%; /* terracotta */
    --primary-foreground: 0 0% 100%;

    --secondary: 28 30% 90%; /* warm sand */
    --secondary-foreground: 24 15% 12%;

    --muted: 28 30% 92%;
    --muted-foreground: 25 12% 35%;

    --accent: 16 40% 88%;
    --accent-foreground: 24 15% 12%;

    --destructive: 0 74% 54%;
    --destructive-foreground: 0 0% 98%;

    --border: 28 22% 85%;
    --input: 28 22% 85%;
    --ring: 17 77% 54%;

    --radius: 0.75rem;

    /* Sidebar tokens */
    --sidebar-background: 38 40% 96%;
    --sidebar-foreground: 24 15% 12%;
    --sidebar-primary: 17 77% 54%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 28 30% 90%;
    --sidebar-accent-foreground: 24 15% 12%;
    --sidebar-border: 28 22% 85%;
    --sidebar-ring: 17 77% 54%;

    /* Extras for premium feel */
    --gradient-primary: linear-gradient(135deg, hsl(var(--primary) / 0.95), hsl(12 80% 58% / 0.95));
    --shadow-elevate: 0 10px 30px -12px hsl(24 25% 10% / 0.15);
    --transition-smooth: all 250ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .dark {
    --background: 24 15% 8%;
    --foreground: 28 36% 96%;

    --card: 24 15% 10%;
    --card-foreground: 28 36% 96%;

    --popover: 24 15% 10%;
    --popover-foreground: 28 36% 96%;

    --primary: 17 77% 54%;
    --primary-foreground: 0 0% 100%;

    --secondary: 24 10% 14%;
    --secondary-foreground: 28 36% 96%;

    --muted: 24 10% 14%;
    --muted-foreground: 28 15% 70%;

    --accent: 24 10% 14%;
    --accent-foreground: 28 36% 96%;

    --destructive: 0 62% 45%;
    --destructive-foreground: 0 0% 98%;

    --border: 24 10% 18%;
    --input: 24 10% 18%;
    --ring: 17 77% 54%;

    --sidebar-background: 24 15% 8%;
    --sidebar-foreground: 28 36% 96%;
    --sidebar-primary: 17 77% 54%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 24 10% 14%;
    --sidebar-accent-foreground: 28 36% 96%;
    --sidebar-border: 24 10% 18%;
    --sidebar-ring: 17 77% 54%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
  }
}

/* README content overflow safety (kept regardless of background) */
@layer components {
  /* MCP card elevation for home/grid media boxes */
  .mcp-card {
    box-shadow: var(--shadow-elevate);
    background-color: hsl(var(--card));
    border: 1px solid hsl(var(--border));
    transition: box-shadow var(--transition-smooth), transform var(--transition-smooth);
  }
  .mcp-card:is(:hover, :focus-within) {
    box-shadow: var(--shadow-elevate), 0 12px 28px -14px hsl(24 25% 10% / 0.22), 0 0 0 1px hsl(var(--ring) / 0.15);
  }
  .dark .mcp-card:is(:hover, :focus-within) {
    box-shadow: var(--shadow-elevate), 0 12px 28px -14px hsl(0 0% 0% / 0.45), 0 0 0 1px hsl(var(--ring) / 0.22);
  }
  .prose {
    word-break: break-word;
    overflow-wrap: anywhere;
    color: hsl(var(--foreground)); /* follow theme foreground color */
  }
  .prose code {
    background-color: hsl(24 10% 90% / 0.65);
    border: 1px solid hsl(28 22% 85%);
    border-radius: 0.375rem;
    padding: 0.2rem 0.35rem;
    color: hsl(var(--foreground));
    font-weight: 500;
  }
  .prose pre {
    overflow-x: auto;
    background-color: hsl(28 30% 92%);
    border: 1px solid hsl(28 22% 85%);
    border-radius: 0.5rem;
    padding: 0.85rem 1rem;
    box-shadow: inset 0 1px 0 hsl(0 0% 100% / 0.4);
    color: hsl(var(--foreground));
  }
  /* Remove inner code background so only the block background shows */
  .prose pre code {
    background: transparent !important;
    border: 0 !important;
    padding: 0 !important;
    color: hsl(var(--foreground));
    font-weight: 400; /* normal weight */
  }
  .dark .prose code {
    background-color: hsl(220 13% 18% / 0.8);
    border-color: hsl(220 13% 26%);
    color: hsl(210 20% 96%);
  }
  .dark .prose pre {
    background-color: hsl(220 13% 16%);
    border-color: hsl(220 13% 26%);
    box-shadow: inset 0 1px 0 hsl(0 0% 100% / 0.06);
    color: hsl(210 20% 96%);
  }
  .dark .prose pre code {
    background: transparent !important;
    border: 0 !important;
    padding: 0 !important;
    color: hsl(210 20% 96%);
    font-weight: 400;
  }
  .prose table {
    display: block;
    overflow-x: auto;
    border: 1px solid hsl(var(--border));
    border-radius: 0.5rem;
  }
  .prose thead th {
    background-color: hsl(var(--muted));
    color: hsl(var(--muted-foreground));
    font-weight: 600;
  }
  .prose th, .prose td {
    border: 1px solid hsl(var(--border));
    padding: 0.5rem 0.75rem;
  }
  .prose img {
    max-width: 100%;
    height: auto;
  }
  /* Keep heading-line badges inline without affecting non-badge links */
  .prose h1 > a:has(img),
  .prose h2 > a:has(img),
  .prose h3 > a:has(img),
  .prose h1 img,
  .prose h2 img,
  .prose h3 img {
    display: inline-flex;
    vertical-align: middle;
    margin-top: 0;
    margin-bottom: 0;
  }
  .prose h1 > a:has(img),
  .prose h2 > a:has(img),
  .prose h3 > a:has(img) {
    margin-left: 0.375rem;
  }
  /* Force badge rows layout consistently */
  .prose .readme-badges-row {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    align-items: center;
  }
  /* If creators used <br> between badges, collapse to gaps instead of vertical stacking */
  .prose .readme-badges-row br { display: none; }
  .prose .readme-badge-item { margin: 0; }
  .prose .readme-badges-row a,
  .prose .readme-badges-row img {
    display: inline-flex;
    vertical-align: middle;
  }

  /* Links inside README: blue in light mode, readable in dark */
  .prose a { color: #0a66c2; text-decoration: underline; }
  .dark .prose a { color: hsl(210 90% 70%); }
  /* Improve list readability: darker markers and text weight */
  .prose ul > li::marker,
  .prose ol > li::marker {
    color: hsl(var(--foreground));
    font-weight: 700;
  }
  .prose ul li,
  .prose ol li {
    color: hsl(var(--foreground));
  }
  /* Preserve collapsible sections styling */
  .prose details {
    padding: 0.25rem 0.5rem;
    border-radius: 0.375rem;
  }
  .prose details > summary {
    cursor: pointer;
    font-weight: 400; /* remove bold */
    color: hsl(var(--foreground)); /* follow theme */
    list-style: none; /* hide default marker across browsers */
  }
  .prose details > summary::-webkit-details-marker {
    display: none; /* hide default marker in WebKit/Blink */
  }
  /* Custom arrow marker (light mode) */
  .prose details > summary::before {
    content: '▸';
    color: currentColor;
    display: inline-block;
    margin-right: 0.5rem;
    transition: transform 0.2s ease;
  }
  .prose details[open] > summary::before {
    content: '▾';
  }
  /* Dark mode: keep legible colors */
  .dark .prose details > summary {
    color: hsl(210 20% 96%);
  }
  .dark .prose details > summary::before {
    color: hsl(210 20% 96%);
  }
  /* Horizontal layout for README badge rows (e.g., shields at the top) */
  .prose .readme-badges-row {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    align-items: center;
  }
  .prose .readme-badges-row a,
  .prose .readme-badges-row img {
    display: inline-flex;
    vertical-align: middle;
  }
}